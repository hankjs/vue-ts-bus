!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e["vue-event-bus"]=t()}(this,function(){"use strict";var e=function(){function e(e){this.Vue=e,this.handles={},this.eventUidMap={}}return e.prototype.setEventUidMap=function(e,t,n){this.eventUidMap[e]||(this.eventUidMap[e]={}),this.eventUidMap[e][t]||(this.eventUidMap[e][t]=[]),this.eventUidMap[e][t].push(n)},e.prototype.off=function(e,t){if(!this.handles[e])return!1;if(t){if(t instanceof Function)for(var n=this.handles[e].length;n--;){var i=this.handles[e][n];i===t&&this.handles[e].splice(n,1)}}else delete this.handles[e];return!0},e.prototype.offByUid=function(e){var t=this,n=this.eventUidMap[e]||{};for(var i in n)!function(e){n.hasOwnProperty(e)&&(n[e].forEach(function(n){t.off(e,n)}),delete n[e])}(i);delete this.eventUidMap[e]},e.prototype.on=function(e,t,n){this.handles[e]||(this.handles[e]=[]),t instanceof Function&&this.handles[e].push(t),n instanceof this.Vue&&this.setEventUidMap(n._uid,e,t)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.handles[e])for(var i=this.handles[e].length,s=0;s<i;s++)this.handles[e][s].apply(null,t)},e}();return{install:function(t,n){void 0===n&&(n={});var i,s=new e(t),o=n.name?n.name:"$eventBus";Object.defineProperties(t.prototype,(i={},i[o]={get:function(){return s}},i)),t.mixin({beforeDestroy:function(){this[o].offByUid(this._uid)}})}}});
