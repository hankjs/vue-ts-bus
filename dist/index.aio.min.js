!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["vue-event-bus"]=e()}(this,function(){"use strict";var t=function(){function t(t){this.Vue=t,this.handles={},this.eventUidMap={}}return t.prototype.setEventUidMap=function(t,e,n){this.eventUidMap[t]||(this.eventUidMap[t]={}),this.eventUidMap[t][e]||(this.eventUidMap[t][e]=[]),this.eventUidMap[t][e].push(n)},t.prototype.off=function(t,e){if(!this.handles[t])return!1;if(e){if(e instanceof Function)for(var n=this.handles[t].length;n--;){var i=this.handles[t][n];i===e&&this.handles[t].splice(n,1)}}else delete this.handles[t];return!0},t.prototype.offByUid=function(t){var e=this,n=this.eventUidMap[t]||{};for(var i in n)!function(t){n.hasOwnProperty(t)&&(n[t].forEach(function(n){e.off(t,n)}),delete n[t])}(i);delete this.eventUidMap[t]},t.prototype.on=function(t,e,n){this.handles[t]||(this.handles[t]=[]),e instanceof Function&&this.handles[t].push(e),n instanceof this.Vue&&this.setEventUidMap(n._uid,t,e)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this.handles[t])for(var i=this.handles[t].length,s=0;s<i;s++)this.handles[t][s].apply(null,e)},t}();return{install:function(e,n){void 0===n&&(n={});var i,s=new t(e),o=n.name?n.name:"$bus";Object.defineProperties(e.prototype,(i={},i[o]={get:function(){return s}},i)),e.mixin({beforeDestroy:function(){this[o].offByUid(this._uid)}})}}});
